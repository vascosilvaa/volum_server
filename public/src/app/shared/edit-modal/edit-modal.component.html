<ng-template #rt let-r="result" let-t="term" id="template-search">
        <div (click)=" navigate(r.geometry.location.lat, r.geometry.location.lng);" class="row no-padding content-search">
            <span class="searched"> {{r.formatted_address}}</span>
        </div>
</ng-template>


<div class="container no-padding">
    <div class="ui-block-title">
        <h6>Editar ação</h6>
    </div>
    <div class="ui-block-content">
        <form [formGroup]="form" (ngSubmit)="onSubmit(form)">
            <div class="row">
                <div class="col-12">
                    <div class="form-group">
                        <label class="label-input">Titulo da ação de voluntariado</label>
                        <input type="text" class="form-control input-form" aria-describedby="title-action" placeholder="Titulo da ação de voluntariado" [class.form-control-danger]="!form.controls.name.valid && form.controls.name.touched" minlength="10" maxlength="60" formControlName="name" required>
                        <small *ngIf="form.controls.name.errors?.required && form.controls.name.touched" class="form-text text-muted">Por favor, insira o título da ação.</small>
                        <small *ngIf="form.controls.name.errors?.maxlength && form.controls.name.touched" class="form-text text-muted">O título da ação não deve exceder o limite de 30 caracteres.</small>
                        <small *ngIf="form.controls.name.errors?.minlength && form.controls.name.touched" class="form-text text-muted">O título da ação deve possuir, pelo menos 10 caracteres.</small>
                    </div>
                </div>
                <div class="col-12">
                    <div class="form-group">
                        <label class="label-input">Descrição da ação de voluntariado</label>
                        <textarea class="form-control input-textarea" rows="6" formControlName='about' placeholder="Descrição, funções do voluntário..." [class.form-control-danger]="!form.controls.description.valid && form.controls.description.touched" minlength="50" formControlName="description" required></textarea>
                        <small class="form-text text-muted" *ngIf="form.controls.description.errors?.required && form.controls.description.touched">Por favor, insira a descrição da ação.</small>
                        <small class="form-text text-muted" *ngIf="form.controls.description.errors?.minlength && form.controls.description.touched">A descrição da ação deve possuir, no mínimo 30 caracteres.</small>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-12">
                                <div class="form-group">
                                    <label class="label-input">Categoria</label>
                                    <select (focusout)="categoryChanged()" class="select-input form-control" formControlName="category" [class.form-control-danger]="form.controls.category.touched && categoryControl==2">
                                        <option value="-1" disabled>Escolher categoria</option>
                                        <option *ngFor="let category of categories" [value]='category?.id_category'>{{category?.name}}</option>>
                                    </select>
                                    <small class="form-text text-muted" *ngIf="form.controls.category.touched && categoryControl==2">Por favor insira a categoria da ação.</small>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6 col-12">
                                <div class="form-group">
                                    <label class="label-input">Seguro</label>
                                    <select (focusout)="insuranceChanged()" class="select-input form-control" formControlName="insurance" [class.form-control-danger]="form.controls.insurance.touched && insuranceControl==2">
                                        <option value="-1" disabled>Seguro</option>
                                        <option value="1">Sim</option>
                                        <option value="0">Não</option>
                                    </select>
                                    <small class="form-text text-muted" *ngIf="form.controls.insurance.touched && insuranceControl==2">Por favor defina se a ação possui seguro de participação.</small>
                                </div>
                            </div>

                            <div class="col-12 mt-3 mb-3">
                                <h5 class="insert-pictures" *ngIf="img==0" (click)="showImgs()">+ Inserir fotografias(s)</h5>
                                <h5 class="insert-pictures" *ngIf="img==1" (click)="hideImgs()">- Esconder fotografias(s)</h5>
                            </div>

                            <div class="col-6" *ngIf="img==1">
                                <div class="form-group">
                                    <input type="file" multiple class="form-control-file" (change)="readUrl($event)" aria-describedby="fileHelp">
                                    <small *ngIf="errorFiles==0" class="form-text text-muted">Pode inserir 3 fotografias selecionando na área de seleção.</small>
                                    <small *ngIf="errorFiles==1" class="form-text text-muted text-red"><strong>Erro! </strong>Só pode inserir 3 fotografias!</small>
                                </div>
                            </div>

                            <div *ngIf="img==1" class="col-2">
                                <div class="imageVol"><img *ngIf="url1" class="imgPreview" [src]="url1"></div>
                            </div>
                            <div *ngIf="img==1" class="col-2">
                                <div class="imageVol"><img *ngIf="url2" class="imgPreview" [src]="url2"></div>
                            </div>
                            <div *ngIf="img==1" class="col-2">
                                <div class="imageVol"><img *ngIf="url3" class="imgPreview" [src]="url3"></div>
                            </div>

                            <div class="col-12">
                                <div class="form-group">
                                    <label class="label-input">Localização</label>
                                    <input type="text" class="form-control input-form" #input [ngModelOptions]="{standalone: true}" [(ngModel)]="model" (keyup.enter)="navigate(model.geometry.location.lat, model.geometry.location.lng)" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter" name="localization" placeholder="Insira a localização do voluntariado" required>
                                    <small *ngIf="coordAdvice"  class="form-text text-muted">Por favor, indique uma localização válida.</small>
                                </div>
                            </div>

                            <div class="col-12 mb-3">
                                <sebm-google-map class="map-size" [latitude]="lat" [longitude]="lng" [zoom]="13">
                                    <sebm-google-map-marker [latitude]="lat" [longitude]="lng" [markerDraggable]="true" (dragEnd)="markerDragEnd($event)"></sebm-google-map-marker>
                                </sebm-google-map>
                            </div>

                            
                            <div class="col-lg-6 col-md-6 col-12 mt-2">
                                <div class="form-group">
                                    <label class="label-input">Data de início</label>
                                    <input class="form-control input-form-date" ngbDatepicker type="date" formControlName="date_begin" placeholder="aaaa-mm-dd" [class.form-control-danger]="!form.controls.date_begin.valid && form.controls.date_begin.touched" required>
                                    <small class="form-text text-muted" *ngIf="form.controls.date_begin.errors?.required && form.controls.date_begin.touched">Por favor insira a data de início da ação.</small>
                                </div>
                            </div>

                            <div class="col-lg-6 col-md-6 col-12 mt-2">
                                <div class="form-group">
                                    <label class="label-input">Data de fim</label>
                                    <input class="form-control input-form-date" ngbDatepicker type="date" formControlName="date_end" placeholder="aaaa-mm-dd" [class.form-control-danger]="!form.controls.date_end.valid && form.controls.date_end.touched">
                                    <small class="form-text text-muted" *ngIf="form.controls.date_end.errors?.pattern && form.controls.date_end.touched">Por favor insira uma data válida.</small>
                                </div>
                            </div>

                            <div class="col-12 mt-3 mb-3">
                                <h5 class="insert-pictures" *ngIf="schedule==0" (click)="showSchedule()">+ Inserir mais detalhes de horário</h5>
                                <h5 class="insert-pictures" *ngIf="schedule==1" (click)="hideSchedule()">- Esconder detalhes de horário</h5>
                            </div>

                            <div class="col-md-4 col-12" *ngIf="schedule==1">
                                <label class="label-input">Hora de entrada</label>
                                <input class="form-control input-form-date" type="time" formControlName="start_time">
                            </div>
                            <div class="col-md-4 col-12" *ngIf="schedule==1">
                                <label class="label-input">Hora de saída</label>
                                <input class="form-control input-form-date" type="time" formControlName="end_time">
                            </div>
                            <div class="col-md-4 col-12" *ngIf="schedule==1">
                                <label class="label-input">Duração diária</label>
                                <input class="form-control input-form-date" type="number" placeholder="Duração diária em horas" formControlName="duration">
                            </div>
                            
                            <div class="col-md-4 col-12 mt-4">
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input class="form-check-input" checked type="checkbox" value="">
                                        Esta ação é publica
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-4 col-12 text-center mt-4">
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input class="form-check-input" checked type="checkbox" value="">
                                        Qualquer pessoa pode ver/comentar.
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-4 col-12 text-right mt-4">
                                <div class="form-check">
                                    <label class="form-check-label">
                                        <input class="form-check-input" checked type="checkbox" value="">
                                        Os candidatos são aceites diretamente.
                                    </label>
                                </div>
                            </div>

                            <div class="col-6 mb-2 mt-5">
                                <a class="btn-settings btn-settings-cancel" routerLink="/profile/{{idProfile}}/actions/my-actions">Cancelar</a>
                            </div>
                            <div class="col-6 mb-2 mt-5">
                                <button type="submit" class="btn-settings btn-settings-save" [disabled]="submitted">Guardar</button>
                            </div>
            </div>
        </form>
    </div>
</div>







<!--
<div class="container">
  <div class="row">
    <div class="col-12">

      <div class="card primaryCard">
        <div class="card-header cardTitle">
          <div class="row">
            <div class="col titleCard">
              Editar ação de voluntariado
            </div>
          </div>
        </div>

      <div class="card-block">
        <form class="float-label" [formGroup]="form" (ngSubmit)="onSubmit(form)" >
          <div class="row">
              <div class="col-12 inputProfile no-margin">
                <div class="control">
                 <input (change)="changed()" [(ngModel)]="model_title" type="text" minlength="10" maxlength="60" formControlName="name" class="" name="title" placeholder="Título da ação de voluntariado" [(ngModel)]="name" required />
                 <label [class.error-label]="!form.controls.name.valid && form.controls.name.touched" for="title">
                   Título
                    <span class="text-error" *ngIf="form.controls.name.errors?.maxlength && form.controls.name.touched" >
                    - Inválido
                    </span>
                    <span class="text-error" *ngIf="form.controls.name.errors?.minlength && form.controls.name.touched" >
                     - Inválido
                    </span>

                  </label>
                </div>
              </div>

              <div class="col-12 inputProfile">
                <div class="control">
                  <textarea [(ngModel)]="model_desc" class="textAreaProfile" minlength="50" formControlName="description" name="textarea" required rows="4" [(ngModel)]="desc" placeholder="Descrição">Descrição das funções do voluntário</textarea>
                  <label [class.error-label]="!form.controls.description.valid && form.controls.description.touched" for="textarea">
                    Descrição
                    <span *ngIf="form.controls.description.errors?.minlength && form.controls.description.touched" class="text-error">- Inválido.</span>
                  </label>
                </div>
              </div>

            <div class="col-6 inputProfile" >
              <select [(ngModel)]="model_category" name="categorie" class="form-control select-input inputText form-control-lg disabled" formControlName="category">
                <option *ngFor="let category of categories" [value]='category.id_category'>{{category.name}}</option>
              </select>
               <label [class.error-label]="!form.controls.category.valid && form.controls.category.touched" for="categorie" class="label-for-select">
                 Categoria
                 </label>
            </div>
              
               <div class="col-6 inputProfile">
              <select [(ngModel)]="model_insurance" class="form-control inputText  select-input form-control-lg disabled" formControlName="insurance">
                <option selected value="1">Sim</option>
                <option value="0">Não</option>
              </select>
              <label [class.error-label]="!form.controls.insurance.valid && form.controls.insurance.touched" for="insurance" class="label-for-select">
                Seguro
              </label>
            </div>

        
     

                 <div class="col-12 inputProfile">
                <div class="control">
                 <input type="text" class="" [ngModelOptions]="{standalone: true}" [(ngModel)]="model" (keyup.enter)="navigate(model.geometry.location.lat, model.geometry.location.lng)" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter" name="localization" placeholder="Insira a localização do voluntariado"  required />
                 <label  for="localization">Localização
                 </label>
                </div>
              </div>

              <div class="col-12 inputProfile">
                <sebm-google-map [latitude]="model_lat" [longitude]="model_lng" [zoom]="13">
                <sebm-google-map-marker [latitude]="model_lat" [longitude]="model_lng" ></sebm-google-map-marker>
                </sebm-google-map>
             
               </div>


               <div class="col-6 inputProfile2">
                <div class="form-group">
                  <div class="input-group">
                    <input class="form-control date_picker" name="dp" ngbDatepicker #d="ngbDatepicker" formControlName="date_begin" placeholder="{{model_date_begin | date}}">
                    <div class="input-group-addon" (click)="d.toggle()" >
                      <i class="data_range_icon material-icons">date_range</i>
                    </div>
                  </div>
                   <label  [class.error-label]="!form.controls.date_begin.valid && form.controls.date_begin.touched" for="dp" class="label-for-select">
                     Data de início
                    </label>  
                </div>
            </div>

        <div class="col-6 inputProfile2">
                <div class="form-group">
                  <div class="input-group">
                    <input class="form-control date_picker" 
                           name="dp2" ngbDatepicker #d2="ngbDatepicker" formControlName="date_end" placeholder="{{model_date_end | date}}">
                    <div class="input-group-addon" (click)="d2.toggle()" >
                      <i class="data_range_icon material-icons">date_range</i>
                    </div>
                  </div>
                   <label for="dp2" [class.error-label]="!form.controls.date_end.valid && form.controls.date_end.touched" class="label-for-select">
                     Data de fim
                     <span *ngIf="form.controls.date_end.errors?.pattern && form.controls.date_end.touched" class="text-error">- Inválido.</span>
                     </label>
                </div>
            </div>


  

          <div  class="col-6 inputProfile">
                  <div class="control">
                    <input type="text" class="" name="date_begin" placeholder="Hora de entrada" [(ngModel)]="start_time" formControlName="start_time" value="09:00" required />
                     <label [class.error-label]="!form.controls.start_time.valid && form.controls.start_time.touched" for="date_begin">
                       Hora de entrada
                       <span  *ngIf="form.controls.start_time.errors?.pattern && form.controls.start_time.touched" class="text-error">- Inválido.</span>
                       </label>
                  </div>              
                  
                </div>
          <div  class="col-6 inputProfile">
                  <div class="control">
                  <input type="text" class="" name="date_end" placeholder="Hora de saída"  [(ngModel)]="end_time" formControlName="end_time" value="17:00" required />
                     <label [class.error-label]="!form.controls.end_time.valid && form.controls.end_time.touched" for="date_end">
                       Hora de saída
                       <span *ngIf="form.controls.end_time.errors?.pattern && form.controls.end_time.touched" class="text-error">- Inválido.</span>
                       </label>
                  </div>          
                </div>
          <div class="col-12 inputProfile">
                  <div class="control">
                  <input type="number" class="" name="duration" placeholder="Duração diária em horas" [(ngModel)]="model_duration" formControlName="duration" value="5" required />
                     <label for="duration">Duração</label>
                  </div>
                </div>


         



               


              <div class="col-6">
                  <a class="btn btn-outline-primary btnDescart" routerLink="/">CANCELAR</a>
              </div>
              <div class="col-6 ">
                <button *ngIf="!formChanged" class="btn btn-outline-primary btnSave" disabled>GUARDAR</button>
                <button *ngIf="formChanged==1" class="btn btn-outline-primary btnSave" type="submit">GUARDAR</button>
              </div>
          </div>
        </form>
        </div>
      </div>
    </div>
    </div>
-->