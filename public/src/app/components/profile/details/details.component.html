<ng-template #rt let-r="result" let-t="term">

        <div class="search-result pointer" (click)="navigate(r.id, r.type)">
            <div class="search-img">
                <img *ngIf="r.type==0" src="http://nevesdealmeida.pt/wp-content/uploads/2016/06/Voluntariado.jpg">
                <img *ngIf="r.type==1 || r.type==2" [src]="r.photo_url">
            </div>
            <div class="search-text">
                <h6 class="search-name">{{ r.name}}</h6>
                <p *ngIf="r.type==0"> Ação de Voluntariado</p>
                <p *ngIf="r.type==1"> Voluntário</p>
                <p *ngIf="r.type==2"> Instituição</p>
            </div>
        </div>    
  
</ng-template>

<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="ui-block">
                <div class="details-header">
                    <div class="details-header-back">
                        <a routerLink="/profile/{{idLogin}}/actions/mine"><i class="material-icons">arrow_back</i></a>
                    </div>
                    <div class="details-header-titile">
                        {{vol?.name}}
                    </div>
                    <div class="details-header-edit" (click)="openEditModal()">
                        <i class="material-icons">mode_edit</i>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Descrição</span>
                                    <p>{{vol?.description}}</p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Categoria</span>
                                    <span class="text">{{vol?.category_name}}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Seguro</span>
                                    <span class="text" *ngIf="vol?.insurance">Sim</span>
                                    <span class="text" *ngIf="!vol?.insurance">Não</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TO DO -->
        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Ação pública</span>
                                    <span class="text" *ngIf="vol?.insurance">Sim</span>
                                    <span class="text" *ngIf="!vol?.insurance">Não</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- TO DO -->

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Qualquer pessoa pode ver/comentar</span>
                                    <span class="text" *ngIf="vol?.insurance">Sim</span>
                                    <span class="text" *ngIf="!vol?.insurance">Não</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TO DO -->
        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Candidados aceites diretamente</span>
                                    <span class="text" *ngIf="vol?.insurance">Sim</span>
                                    <span class="text" *ngIf="!vol?.insurance">Não</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- TO DO -->

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Data de inicio</span>
                                    <span class="text">{{vol?.date_begin | date:"d"}} de {{vol?.date_begin | date:"MMMM"}}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Data de fim</span>
                                    <span class="text" *ngIf="vol?.date_end">{{vol?.date_end | date:"d"}} de {{vol?.date_end | date:"MMMM"}}</span>
                                    <span class="text" *ngIf="!vol?.date_end || vol?.date_end == null">-</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Hora de inicio</span>
                                    <span class="text" *ngIf="vol?.start_time!='00:00:00.000000'">{{vol?.start_time}}</span>
                                     <span class="text" *ngIf="vol?.start_time=='00:00:00.000000' || !vol?.start_time">-</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Hora de fim</span>
                                    <span class="text" *ngIf="vol?.end_time!='00:00:00.000000'">{{vol?.end_time}}</span>
                                     <span class="text" *ngIf="vol?.end_time=='00:00:00.000000' || !vol?.end_time">-</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- TO DO -->
        <div class="col-lg-3">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Duração diária</span>
                                    <span class="text" *ngIf="vol?.duration">{{vol?.duration}}</span>
                                    <span class="text" *ngIf="!vol?.duration ">-</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- TO DO -->

        <div class="col-lg-12">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Localização</span>
                                    <span class="text">{{address}}</span>
                                </li>
                                <li class="map-details-margin">
                                    <sebm-google-map [latitude]="lat" [longitude]="lng" [zoom]="14">
                                        <sebm-google-map-marker [latitude]="lat" [longitude]="lng"></sebm-google-map-marker>
                                    </sebm-google-map>  
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12" *ngIf="!vol?.isMap">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Fotografia(s)</span>
                                </li>
                                <li>
                                   <div class="row">
                                        <div class="col-md-4 col-12 img-action-details" *ngFor="let photo of vol?.photos">
                                            <img [src]="photo">  
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Convidar pessoas</span>
                                    <span class="text"><input class="inputInvite" [(ngModel)]="model" [ngbTypeahead]="search" [resultTemplate]="rt" [inputFormatter]="formatter" (keyup.enter)="navigate(model.id, model.type)" placeholder="Convidar voluntários"></span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6" *ngIf="vol?.active == 1">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Candidatos <span *ngIf="numberCandidates!=0">({{numberCandidates}})</span></span>
                                </li>
                                <li *ngFor="let candidate of candidates">
                                    <div class="list-details-users">
                                        <div class="list-details-users-picture">
                                            <img src="{{candidate?.photo_url}}">
                                        </div>
                                        <div class="list-details-users-name">
                                            <p>{{candidate?.name}}</p>
                                        </div>
                                        <div class="list-details-users-btn">
                                            <a class="btn-details-list btn-details-list-re mr-1" (click)="openRemoveConfirmCandidate(5, idVol, candidate?.id_user, candidate?.name)">Recusar</a>
                                            <a class="btn-details-list btn-details-list-ac" (click)="confirmCandidate(candidate?.id_user)">Aceitar</a>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-details-users-no" *ngIf="candidates==undefined || candidates==null || candidates==''">
                                    <i class="material-icons">event_busy</i>
                                    <p>Neste momento, ainda não possui candidatos para esta ação de voluntariado.<p>
                                </li> 
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-6" *ngIf="vol?.active == 1">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Confirmados <span *ngIf="numberCandidates!=0">({{numberConfirms}})</span></span>
                                </li>
                                <li *ngFor="let confirmed of confirmeds; let i= index">
                                    <div class="list-details-users">
                                        <div class="list-details-users-picture">
                                            <img src="{{confirmed?.photo_url}}">
                                        </div>
                                        <div class="list-details-users-name">
                                            <p>{{confirmed?.name}}</p>
                                        </div>
                                        <div class="list-details-users-btn">
                                            <a class="btn-details-list btn-details-list-re" (click)="openRemoveConfirm(4, idVol, confirmed?.id_user, confirmed?.name, i)">Remover</a>
                                        </div>
                                    </div>
                                </li>
                                <li class="list-details-users-no" *ngIf="confirmeds==undefined || confirmeds==null || confirmeds==''">
                                    <i class="material-icons">event_busy</i>
                                    <p>Neste momento, ainda não possui candidatos para esta ação de voluntariado.<p>
                                </li> 
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-12" *ngIf="vol?.active == 0">
            <div class="ui-block">
                <div class="ui-block-content-details">
                    <div class="row">
                        <div class="col-12">
                            <ul>
                                <li>
                                    <span class="title">Voluntários</span>
                                </li>
                                <li *ngFor="let confirmed of confirmeds; let i= index">
                                    <div class="list-details-users">
                                        <div class="list-details-users-picture">
                                            <img src="{{confirmed?.photo_url}}">
                                        </div>
                                        <div class="list-details-users-name">
                                            <a [routerLink]="['../../../'+confirmed.id_user+'/about']"><p>{{confirmed?.name}}</p></a>
                                        </div>
                                        <div class="list-details-users-btn">
                                            <md-icon *ngFor="let star of confirmed?.classification">star_rate</md-icon>
                                            <md-icon *ngFor="let star of confirmed?.classification_negative">star_border</md-icon>
                                        </div>
                                    </div>
                                </li>

                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-12">
            <div class="card primaryCard">
                <div class="card-header cardTitle">
                    <div class="row">
                        <div class="col titleCard no-padding">
                            <div>Comentários</div>
                            <div class="see-all ml-auto"></div>
                        </div>
                    </div>
                </div>
                <div class="comments-section">
                    <div class="card-Comments" #scrollMe *ngIf="numberComments>0">
                        <div class="col-12" *ngFor="let comment of comments">
                            <div class="row comments-header">
                                <div class="col card-user--comments-image col-md-auto">
                                    <img src="{{comment.photo_url}}">
                                </div>
                                <div class="col-8 card-user-nd">
                                    <div class="card-user-name-comments ts13">{{comment.name}}</div>
                                    <div class="card-date-comments ts12">{{comment.date | amTimeAgo: true}}</div>
                                </div>
                                <div class="col card-option-comments text-right">
                                    <md-icon class="card-btn-option" [mdMenuTriggerFor]="menu">more_vert</md-icon>
                                    <md-menu #menu="mdMenu">
                                        <button md-menu-item>
                                    <md-icon>dialpad</md-icon>
                                    <span>Redial</span>
                                </button>
                                        <button md-menu-item disabled>
                                    <md-icon>voicemail</md-icon>
                                    <span>Check voicemail</span>
                                </button>
                                        <button md-menu-item>
                                    <md-icon>notifications_off</md-icon>
                                    <span>Disable alerts</span>
                                </button>
                                    </md-menu>
                                </div>
                            </div>
                            <div class="row comments-content">
                                <div class="col-12 ts13">
                                    {{comment.message}}
                                </div>
                            </div>
                            <div class="borderComments"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 insert-comment">
                <div style="display:flex">
                    <div class="card-user--comments-image card-user-comments-image-comments">
                        <img src="{{vol?.user.photo_url}}">
                    </div>
                    <div style="width:93%">
                        <md-input-container class="width100">
                            <input mdInput [(ngModel)]="comentario" (keyup.enter)="sendComment(comentario)">
                        </md-input-container>
                    </div>
                    <div class="text-center" style="padding-left:15px;">
                        <md-icon class="btnSendIcon btnSendColorGrey" (click)="sendComment(comentario)">send</md-icon>
                    </div>
                </div>
            </div>
            </div>   

            <div class="col-6 mb-2 mt-3" *ngIf="vol?.active == 1">
                <a class="btn-settings btn-settings-cancel" (click)="openDelete(1, vol.id_vol, vol.date_begin, vol.name)">Apagar ação</a>
            </div>
            <div class="col-6 mb-2 mt-3" *ngIf="vol?.active == 1">
                <button type="submit" class="btn-settings btn-settings-save" style="border:none" (click)="openEnd(2,1)">Finalizar ação</button>
            </div>
        </div>
    </div>

